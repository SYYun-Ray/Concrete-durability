
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>콘크리트 내구성 – 강도/피복/허용균열폭/배합 · SPA</title>
  <style>
    :root {
      --bg: #f7fafc;
      --surface: #ffffff;
      --text: #111827;
      --muted: #4b5563;
      --border: #e5e7eb;
      --shadow: 0 4px 14px rgba(0,0,0,0.08);
      --primary: #0b5fff;
      --primary-weak: #e6efff;
      --chip: #eef2ff;
      --chip-border: #c7d2fe;
    }
    * { box-sizing: border-box; }
    html, body { margin:0; background:var(--bg); color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Apple Color Emoji, Segoe UI Emoji; }
    header { background: linear-gradient(90deg, #0b5fff, #2563eb); color:#fff; padding:16px 0; box-shadow: var(--shadow); }
    .container { max-width:1200px; margin:0 auto; padding:0 24px; }
    h1 { margin:0; font-size:24px; }
    h2 { font-size:18px; margin:18px 0 10px; color:#111827; }
    p.note { color:var(--muted); font-size:13px; }

    /* top nav */
    .topnav { display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; margin:16px 0; }
    .navtab { border:1px solid var(--border); background:#fff; border-radius:14px; padding:14px; box-shadow: var(--shadow); cursor:pointer; text-align:center; font-weight:700; }
    .navtab[aria-selected="true"] { outline:2px solid var(--primary); }
    .navdesc { margin-top:6px; color:#4b5563; font-size:12px; font-weight:500; }

    /* cards / tables */
    .card { background:var(--surface); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow:var(--shadow); }
    .grid4 { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }
    .thumb { position:relative; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#f3f4f6; aspect-ratio:4/3; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .thumb img { width:100%; height:100%; object-fit:cover; }
    .thumb iframe { width:100%; height:100%; border:0; display:block; }
    .thumb .overlay { position:absolute; inset:0; background:transparent; border:0; padding:0; margin:0; cursor:pointer; }

    .pillbar, .chips { display:flex; gap:8px; flex-wrap:wrap; }
    .pill, .chip, .exo { border:1px solid var(--chip-border); background: var(--chip); color:#1f2937; border-radius:999px; padding:8px 14px; cursor:pointer; font-weight:600; }
    .exo { border-radius:10px; }
    .active { background:var(--primary) !important; color:#fff !important; border-color: var(--primary) !important; }
    .exogrid { display:grid; grid-template-columns: repeat(10, minmax(0,1fr)); gap:8px; }
    .toolbar { display:flex; gap:8px; align-items:center; margin-top:12px; flex-wrap:wrap; }
    input[type="text"] { border: 1px solid var(--border); background:#fff; padding:10px 12px; border-radius:10px; width:300px; }
    .btn { background:var(--primary); color:#fff; border:none; padding:10px 14px; border-radius:10px; cursor:pointer; }
    .btn.secondary { background:#fff; color:#111827; border:1px solid var(--border); }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { border-bottom:1px solid var(--border); padding:10px 8px; font-size:13px; vertical-align:top; }
    th { text-align:left; color:#374151; background:#f9fafb; position:sticky; top:0; }
    tbody tr:hover td { background:#f9fafb; }
    .hl { background:#fff7ed; border:1px solid #fed7aa; border-radius:8px; padding:3px 6px; }

    /* Modal */
    .modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.5); z-index:50; }
    .modal.open { display:flex; }
    .modal-content { width:min(95vw, 1200px); height:min(90vh, 800px); background:#000; border-radius:12px; overflow:hidden; display:flex; flex-direction:column; }
    .modal-content img { display:none; width:100%; height:100%; object-fit:contain; background:#000; flex:1 1 auto; }
    .modal-content iframe { display:none; width:100%; height:100%; border:0; background:#000; flex:1 1 auto; }
    .modal-footer { padding:8px 12px; background: #0f172a; color:#e5e7eb; display:flex; justify-content:space-between; align-items:center; }

    /* Panels */
    [data-panel] { display:none; }
    [data-panel][data-active="true"] { display:block; }
  
/* ---- COVER (피복두께) styles ---- */
.cover-grid{display:grid;grid-template-columns:1.1fr 1fr;gap:12px;align-items:center}
.cover-illust img{max-width:70%;height:auto;border-radius:10px;border:1px solid var(--border)}
.cover-filters{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
.cover-filters label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
.cover-filters input,.cover-filters select{width:100%;padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:#fff;color:var(--text)}
.cover-chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.cover-chip{background:var(--chip);border:1px solid var(--chip-border);padding:6px 10px;border-radius:999px;font-size:12px;color:#1f2937}


/* Floating close button */
.modal .close-x{position:absolute;top:10px;right:10px;border:0;border-radius:9999px;background:rgba(255,255,255,.95);
  width:40px;height:40px;font-size:22px;line-height:40px;text-align:center;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.25);}
.modal .close-x:focus{outline:2px solid #3b82f6;}

/* Theme: Neo Glass Dashboard */
body.theme-neo {
  --bg: linear-gradient(160deg, #eff6ff 0%, #f8fafc 45%, #ffffff 100%);
  --surface: rgba(255, 255, 255, 0.84);
  --text: #0f172a;
  --muted: #54607c;
  --border: rgba(148, 163, 184, 0.32);
  --shadow: 0 20px 45px rgba(15, 23, 42, 0.12);
  --primary: #2563eb;
  --primary-weak: rgba(37, 99, 235, 0.12);
  --chip: rgba(59, 130, 246, 0.12);
  --chip-border: rgba(59, 130, 246, 0.32);
  background: var(--bg);
  font-family: "Pretendard", "Noto Sans KR", sans-serif;
  color: var(--text);
}

body.theme-neo header {
  width: min(96%, 1280px);
  margin: 24px auto 40px;
  padding: 32px 0;
  border-radius: 28px;
  background: linear-gradient(100deg, #2563eb, #4f46e5);
  box-shadow: 0 32px 65px rgba(37, 99, 235, 0.22);
  position: relative;
  overflow: hidden;
}

body.theme-neo header::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.35), transparent 55%),
              radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.25), transparent 60%);
  opacity: 0.9;
}

body.theme-neo header .container {
  position: relative;
  z-index: 1;
  max-width: none;
  padding: 0 48px;
}

body.theme-neo h1 {
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -0.01em;
}

body.theme-neo header p.note {
  color: rgba(226, 232, 240, 0.92);
  font-size: 15px;
  margin-top: 8px;
}

body.theme-neo main.container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 36px 80px !important;
  display: grid;
  grid-template-columns: repeat(12, minmax(0, 1fr));
  gap: 28px;
}

body.theme-neo nav.topnav {
  grid-column: 1 / -1;
  display: flex;
  flex-wrap: wrap;
  gap: 18px;
  margin: 0;
}

body.theme-neo .navtab {
  flex: 1 1 200px;
  border-radius: 18px;
  padding: 20px 22px;
  background: rgba(255, 255, 255, 0.65);
  border: 1px solid rgba(148, 163, 184, 0.3);
  color: #1d283a;
  text-align: left;
  font-size: 15px;
  font-weight: 700;
  box-shadow: 0 16px 36px rgba(37, 99, 235, 0.12);
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

body.theme-neo .navtab .navdesc {
  margin-top: 10px;
  color: rgba(30, 64, 175, 0.7);
  font-weight: 600;
  font-size: 13px;
}

body.theme-neo .navtab:hover {
  transform: translateY(-4px);
  box-shadow: 0 26px 52px rgba(37, 99, 235, 0.18);
  background: rgba(255, 255, 255, 0.78);
}

body.theme-neo .navtab[aria-selected="true"] {
  outline: none;
  border-color: rgba(59, 130, 246, 0.55);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(129, 140, 248, 0.18));
  box-shadow: 0 28px 60px rgba(37, 99, 235, 0.24);
}

body.theme-neo section[data-panel] {
  grid-column: 1 / -1;
}

body.theme-neo section[data-panel][data-active="true"] {
  display: grid;
  gap: 28px;
}

body.theme-neo .card {
  border-radius: 26px;
  padding: 32px;
  border: 1px solid rgba(148, 163, 184, 0.28);
  background: rgba(255, 255, 255, 0.82);
  backdrop-filter: blur(18px);
  box-shadow: 0 24px 58px rgba(15, 23, 42, 0.15);
}

body.theme-neo section[data-panel] > .card {
  margin: 0 !important;
}

body.theme-neo .card > .card {
  padding: 22px;
  border-radius: 20px;
  background: rgba(248, 250, 252, 0.9);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

body.theme-neo h2 {
  font-size: 22px;
  color: #1e293b;
  margin-bottom: 16px;
}

body.theme-neo .grid4 {
  gap: 18px;
}

body.theme-neo .thumb {
  border-radius: 20px;
  border: 1px solid rgba(148, 163, 184, 0.32);
  background: linear-gradient(145deg, rgba(59, 130, 246, 0.08), rgba(99, 102, 241, 0.05));
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.65);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

body.theme-neo .thumb:hover {
  transform: translateY(-6px);
  box-shadow: 0 24px 44px rgba(30, 64, 175, 0.22);
}

body.theme-neo .pill, body.theme-neo .chip, body.theme-neo .exo {
  border-radius: 999px;
  background: rgba(59, 130, 246, 0.14);
  border: 1px solid rgba(96, 165, 250, 0.45);
  color: #1e3a8a;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

body.theme-neo .btn {
  border-radius: 12px;
  padding: 12px 20px;
  background: linear-gradient(120deg, #2563eb, #7c3aed);
  box-shadow: 0 18px 36px rgba(37, 99, 235, 0.24);
  font-weight: 600;
  letter-spacing: 0.01em;
}

body.theme-neo .btn.secondary {
  background: rgba(255, 255, 255, 0.92);
  color: #1d4ed8;
  border: 1px solid rgba(59, 130, 246, 0.35);
  box-shadow: none;
}

body.theme-neo table {
  border-radius: 22px;
  overflow: hidden;
  border: 1px solid rgba(148, 163, 184, 0.25);
  box-shadow: 0 16px 38px rgba(15, 23, 42, 0.18);
}

body.theme-neo th {
  background: rgba(226, 232, 240, 0.85);
  color: #1e293b;
  font-weight: 600;
}

body.theme-neo tbody tr:hover td {
  background: rgba(37, 99, 235, 0.08);
}

body.theme-neo .modal-content {
  border-radius: 18px;
  box-shadow: 0 32px 65px rgba(15, 23, 42, 0.45);
}

@media (max-width: 1024px) {
  body.theme-neo main.container {
    grid-template-columns: repeat(6, minmax(0, 1fr));
    padding: 0 24px 64px !important;
  }

  body.theme-neo nav.topnav {
    gap: 14px;
  }

  body.theme-neo section[data-panel] {
    grid-column: 1 / -1;
  }
}

@media (max-width: 640px) {
  body.theme-neo header {
    width: min(94%, 720px);
    padding: 28px 0;
  }

  body.theme-neo header .container {
    padding: 0 24px;
  }

  body.theme-neo h1 {
    font-size: 24px;
  }

  body.theme-neo main.container {
    grid-template-columns: repeat(1, minmax(0, 1fr));
    padding: 0 18px 56px !important;
    gap: 22px;
  }

  body.theme-neo .navtab {
    flex: 1 1 100%;
  }

  body.theme-neo .card {
    padding: 24px;
  }
}
</style>
</head>
<body class="theme-neo">
  <header>
    <div class="container">
      <h1>콘크리트 내구성(한국 기준) – 강도 · 피복두께 · 허용균열폭 · 재료·배합요구</h1>
    </div>
  </header>

  <main class="container" style="padding: 16px 0 28px;">
    <!-- Top navigation (tabs/cards) -->
    <nav class="topnav" role="tablist" aria-label="Durability Sections">
      <button class="navtab" role="tab" aria-selected="true" data-target="#strength">강도
        <div class="navdesc">최소 강도</div>
      </button>
      <button class="navtab" role="tab" aria-selected="false" data-target="#cover">피복두께
        <div class="navdesc">최소 피복 – 필터/표</div>
      </button>
      <button class="navtab" role="tab" aria-selected="false" data-target="#crack">허용균열폭
        <div class="navdesc">w<sub>lim</sub></div>
      </button>
      <button class="navtab" role="tab" aria-selected="false" data-target="#materials">재료·배합요구사항
        <div class="navdesc">W/B 한도 등</div>
      </button>
    </nav>

    <!-- Panel: Strength (완료) -->
    <section id="strength" data-panel data-active="true">
      <!-- 1) 기준 개요 카드 -->
      <section class="card">
        <h2>1) 내구성 관련 한국 설계기준의 구성 · 단계별 참고 기준</h2>
        <div class="grid4" style="grid-template-columns:1.3fr 1fr 1fr;">
          <div class="card" style="padding:14px;">
            <strong>노출환경·노출등급</strong>
            <p class="note">환경(탄산화·염화물·동결융해 등)과 등급을 정해 설계 입력을 확정.</p>
            <div class="note">KDS 14 20 40(내구성)</div>
            <ul style="margin:8px 0 0 18px;">
              <li>범주 E/EA/EC/EF/ES</li>
              <li>세부 등급(E0, EA1…)</li>
              <li>수명·환경조건 반영</li>
            </ul>
          </div>
          <div class="card" style="padding:14px;">
            <strong>재료·배합·품질</strong>
            <p class="note">재료 선택·배합·시공 품질관리 조건.</p>
            <div class="note">KCS 14 20 10</div>
            <ul style="margin:8px 0 0 18px;">
              <li>배합·운반·타설·양생</li>
              <li>환경대응 품질관리</li>
            </ul>
          </div>
          <div class="card" style="padding:14px;">
            <strong>강도·피복·상세</strong>
            <p class="note">최소 강도·피복두께·허용균열폭 등.</p>
            <div class="note">KDS 14 20 40 / 50</div>
            <ul style="margin:8px 0 0 18px;">
              <li>최소 압축강도</li>
              <li>최소 피복두께</li>
              <li>허용균열폭</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- 2) Exposure thumbnails -->
      <section class="card" style="margin-top:14px;">
        <h2>2) Exposure Class (노출등급) 그림 예시</h2>
        <div class="grid4" id="exposureThumbs">
<figure class="thumb" data-caption="항만">
            <img src="assets/images/01_항만.png" alt="01_항만" />
            <button class="overlay" aria-label="미리보기"></button>
          </figure>

          <figure class="thumb" data-caption="해상교량">
            <img src="assets/images/02_해상교량.png" alt="02_해상교량" />
            <button class="overlay" aria-label="미리보기"></button>
          </figure>

          <figure class="thumb" data-caption="육상교량">
            <img src="assets/images/03_육상교량.png" alt="03_육상교량" />
            <button class="overlay" aria-label="미리보기"></button>
          </figure>

          <figure class="thumb" data-caption="도로구조물">
            <img src="assets/images/04_도로구조물.png" alt="04_도로구조물" />
            <button class="overlay" aria-label="미리보기"></button>
          </figure>
</div>
      </section>

      <!-- 3) 필터 버튼 (통합) -->
      <section class="card" style="margin-top:14px;">
        <h2>3) 필터 버튼</h2>
        <div class="filters">
          <div>
            <div class="note" style="margin-bottom:6px;">KR_Class1</div>
            <div id="krPills" class="pillbar"></div>
          </div>
          <div>
            <div class="note" style="margin-bottom:6px;">Member</div>
            <div id="memberChips" class="chips"></div>
          </div>
          <div>
            <div class="note" style="margin-bottom:6px;">세부 등급 (KR_Exposure_Class)</div>
            <div id="exogrid" class="exogrid"></div>
          </div>
        </div>
      </section>

      <!-- 4) 표 -->
      <section class="card" style="margin-top:14px;">
        <h2>4) 표</h2>
        <div class="toolbar">
          <input id="searchBox" type="text" placeholder="자유검색 (모든 열 대상)" />
          <button id="resetBtn" class="btn secondary" type="button">필터 초기화</button>
          <button id="exportBtn" class="btn" type="button">필터 결과 CSV</button>
        </div>
        <h3 style="margin:12px 0 6px;">KOR_Class_table_Main</h3>
        <div id="tableWrap"></div>

        <h3 style="margin:16px 0 6px;">KOR_Guide (선택 상태에 따른 필터)</h3>
        <div id="guideWrapFiltered"></div>

        <details style="margin-top:16px;">
          <summary>보조표: KOR_Sulphate_Soil</summary>
          <div id="soilWrap" style="margin-top:8px;"></div>
        </details>
        <details style="margin-top:8px;">
          <summary>보조표: KOR_Sulphate_Water</summary>
          <div id="waterWrap" style="margin-top:8px;"></div>
        </details>

        <p class="note" style="margin-top:10px;">강조 열: <span class="hl">Min_Con_Str</span></p>
      </section>
    </section>

    <!-- Panel: Cover (빈 페이지) -->
    
<section id="cover" data-panel>
  <!-- Definition + Illustration -->
  <section class="card">
    <h2>피복두께 – 정의 & 개념도</h2>
    <div class="cover-grid">
      <div>
        <p><strong>최소 피복두께</strong>란:</p>
        <ul style="margin:6px 0 0 18px;">
          <li><strong>횡철근이 주철근을 감싸는 경우</strong>: 콘크리트 표면 → <em>스터럽·띠철근·나선철근</em>의 <strong>바깥 표면</strong>까지의 최단거리</li>
          <li><strong>그렇지 않은 경우</strong>: 콘크리트 표면 → <em>가장 외단 주근</em>의 표면까지의 최단거리</li>
          <li><strong>포스트텐셔닝 프리스트레싱 강재</strong>: 콘크리트 표면 → <em>덕트(duct) 또는 철제 접속구</em>의 표면까지의 최단거리</li>
        </ul>
        <p class="note" style="margin-top:6px;">측정은 항상 <strong>최단거리</strong> 기준(곡면·모서리 포함).</p>
      </div>
      <div class="cover-illust" style="text-align:center;">
  <img src="assets/images/cover_concept.png" alt="cover concept" />
</div>
    </div>
  </section>

  <!-- Filters -->
  <section class="card" style="margin-top:14px;">
    <h2>필터</h2>
    <div class="cover-filters" id="coverFilters"></div>
    <div class="cover-chips" id="coverChips"></div>
  </section>

  <!-- Table -->
  <section class="card" style="margin-top:14px;">
    <h2>표</h2>
    <div class="toolbar">
      <input id="coverSearch" type="text" placeholder="전체 검색 (모든 열)" />
      <button id="coverReset" class="btn secondary" type="button">초기화</button>
      <button id="coverExport" class="btn" type="button">CSV 내보내기</button>
      <span class="note" id="coverCount" style="margin-left:auto;"></span>
    </div>
    <div style="overflow:auto; border:1px solid var(--border); border-radius:12px; margin-top:10px;">
      <table>
        <thead id="coverHead"></thead>
        <tbody id="coverBody"></tbody>
      </table>
    </div>
  </section>
</section>

    </section>

    <!-- Panel: Crack width (빈 페이지) -->
    
<section id="crack" data-panel>
  <section class="card">
    <h2>허용 균열폭 (KDS 14 20 30)</h2>
    <p class="note">환경조건에 따라 <b>기준값</b>과 <b>k·c<sub>c</sub></b> 중 큰 값을 허용치로 적용합니다. c<sub>c</sub>는 최외단 주철근의 표면과 콘크리트 표면 사이의 <b>최소 피복 두께</b>(mm).</p>
    <div style="overflow:auto;">
      <table class="table" style="min-width:720px; border-collapse:collapse; width:100%">
        <caption>철근콘크리트 구조물의 허용 균열폭 w<sub>a</sub> (강재 부식에 대한 환경조건)</caption>
        <thead>
          <tr>
            <th style="width:20%">강재</th>
            <th>건조 환경</th>
            <th>습윤 환경</th>
            <th>부식성 환경</th>
            <th>고부식성 환경</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>철근</td>
            <td>0.4 또는 0.006&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
            <td>0.3 또는 0.005&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
            <td>0.3 또는 0.004&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
            <td>0.3 또는 0.0035&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
          </tr>
          <tr>
            <td>긴장재</td>
            <td>0.2 또는 0.005&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
            <td>0.2 또는 0.004&nbsp;c<sub>c</sub> <br><span class="note">중 큰 값</span></td>
            <td>–</td>
            <td>–</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="card" style="margin-top:14px; border:1px solid var(--border);">
      <table class="table" style="min-width:560px; border-collapse:collapse; width:100%">
        <caption>수처리 구조물의 허용 균열폭 w<sub>a</sub></caption>
        <thead>
          <tr>
            <th style="width:34%">구분</th>
            <th>휨인장균열</th>
            <th>전 단면 인장균열</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>오염되지 않은 물<span class="note">¹</span></td>
            <td>0.25</td>
            <td>0.20</td>
          </tr>
          <tr>
            <td>오염된 액체<span class="note">²</span></td>
            <td>0.20</td>
            <td>0.15</td>
          </tr>
        </tbody>
      </table>
      <p class="note" style="margin-top:.5rem">
        ¹ 예: 음용수(상수도) 시설물 · ² 오염이 매우 심한 경우 발주자와 협의하여 결정
      </p>
    </div>
  </section>

  <section class="card" style="margin-top:14px;">
    <h3 style="margin-bottom:8px;">간단 계산기 (KDS)</h3>
    <p class="note">환경·강재를 선택하고 필요한 경우 피복두께 c<sub>c</sub>(mm)를 입력하세요.</p>

    <div class="grid2" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
      <div>
        <label for="cr_type"><b>적용 대상</b></label>
        <select id="cr_type" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;">
          <option value="rc">일반 구조 (철근/긴장재)</option>
          <option value="water">수처리 구조물</option>
        </select>
      </div>
      <div id="cr_steelWrap">
        <label for="cr_steel"><b>강재</b></label>
        <select id="cr_steel" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;">
          <option value="rebar">철근</option>
          <option value="tendon">긴장재</option>
        </select>
      </div>
    </div>

    <div class="grid2" id="cr_envRow" style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:8px;">
      <div>
        <label for="cr_env"><b>환경조건</b></label>
        <select id="cr_env" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;">
          <option value="dry">건조</option>
          <option value="wet">습윤</option>
          <option value="corrosive">부식성</option>
          <option value="highcor">고부식성</option>
        </select>
      </div>
      <div id="cr_ccRow">
        <label for="cr_cc"><b>피복두께 c<sub>c</sub> (mm)</b></label>
        <input id="cr_cc" type="number" inputmode="decimal" min="0" step="1" placeholder="예: 40" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;" />
        <div class="note" style="margin-top:4px;">c<sub>c</sub>는 최외단 주철근의 표면과 콘크리트 표면 사이의 <b>최소 피복 두께</b> (mm)</div>
      </div>
    </div>

    <div class="grid2" id="cr_waterRow" style="display:none; grid-template-columns:1fr 1fr; gap:10px; margin-top:8px;">
      <div>
        <label for="cr_waterClass"><b>수처리: 유체 구분</b></label>
        <select id="cr_waterClass" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;">
          <option value="clean">오염되지 않은 물</option>
          <option value="dirty">오염된 액체</option>
        </select>
      </div>
      <div>
        <label for="cr_waterMode"><b>균열 유형</b></label>
        <select id="cr_waterMode" style="width:100%; padding:.6rem; border:1px solid var(--border); border-radius:10px;">
          <option value="flex">휨인장균열</option>
          <option value="full">전 단면 인장균열</option>
        </select>
      </div>
    </div>

    <div id="cr_resultBox" style="margin-top:10px; padding:12px; border:1px dashed var(--border); border-radius:12px; background:var(--panel);">
      <div class="note" id="cr_formula">w<sub>a</sub> = max(기준값, k·c<sub>c</sub>)</div>
      <div style="margin-top:.35rem">
        <span style="font-size:1.8rem; font-weight:800;" id="cr_wa">–</span> <span class="note">mm</span>
      </div>
      <div class="note" id="cr_hint"></div>
    </div>
  </section>

  <section class="card" style="margin-top:14px;">
    <h3>참고: ACI · Eurocode 허용균열폭 (요약)</h3>
    <details open>
      <summary><b>ACI (미국)</b></summary>
      <ul>
        <li><b>ACI 318</b>은 균열폭 한계를 직접 지정하기보다는 철근 응력·간격을 통한 균열제어 절차를 제시.</li>
        <li><b>ACI 224R</b> 권장값(실무 참고):
          <ul>
            <li>건조 실내 등 미노출: 약 <b>0.41&nbsp;mm</b></li>
            <li>습윤·일반 노출: 약 <b>0.33&nbsp;mm</b></li>
            <li>제빙염·해수 등 가혹: 약 <b>0.25&nbsp;mm</b> 또는 이하</li>
            <li>수밀 요구(저수조 등): <b>0.10&nbsp;mm</b> 수준</li>
          </ul>
        </li>
        <li><b>ACI 350</b>(환경/수처리 구조): 누수 제어 목적상 더 엄격한 제한(대체로 0.25&nbsp;mm 이하)을 적용.</li>
      </ul>
    </details>
    <details>
      <summary><b>Eurocode 2 (EN 1992-1-1)</b></summary>
      <ul>
        <li>권장 허용균열폭 <em>w<sub>max</sub></em> 예시(국가부록에 의해 조정 가능):
          <ul>
            <li>일반 내구성: 보통 <b>0.3&nbsp;mm</b></li>
            <li>가혹한 노출(염해·빙해 등): <b>0.2&nbsp;mm</b></li>
            <li>엄격한 수밀: <b>0.1&nbsp;mm</b></li>
          </ul>
        </li>
        <li>EC2는 하중조합(준영구/빈발 등)과 상세에 따른 계산 절차를 병행하도록 규정.</li>
      </ul>
      <p class="note">※ 요약 참고값이며 실제 적용은 해당 국가부록/명세 확인 필요.</p>
    </details>
  </section>
</section>

<script>
// ----- Crack calc data & logic (scoped) -----
(function(){
  const CRACK_KDS = {
    rc: {
      rebar: {
        dry:       { base: 0.4, k: 0.006 },
        wet:       { base: 0.3, k: 0.005 },
        corrosive: { base: 0.3, k: 0.004 },
        highcor:   { base: 0.3, k: 0.0035 }
      },
      tendon: {
        dry: { base: 0.2, k: 0.005 },
        wet: { base: 0.2, k: 0.004 },
        corrosive: null,
        highcor: null
      }
    },
    water: {
      clean: { flex: 0.25, full: 0.20 },
      dirty: { flex: 0.20, full: 0.15 }
    }
  };

  const typeSel = document.getElementById('cr_type');
  const steelSel = document.getElementById('cr_steel');
  const envSel = document.getElementById('cr_env');
  const ccInput = document.getElementById('cr_cc');

  const steelWrap = document.getElementById('cr_steelWrap');
  const envRow = document.getElementById('cr_envRow');
  const ccRow = document.getElementById('cr_ccRow');
  const waterRow = document.getElementById('cr_waterRow');
  const waterClassSel = document.getElementById('cr_waterClass');
  const waterModeSel = document.getElementById('cr_waterMode');

  const waOut = document.getElementById('cr_wa');
  const hint = document.getElementById('cr_hint');
  const formula = document.getElementById('cr_formula');

  function format(num){
    if (num == null || isNaN(num)) return '–';
    return (Math.round(num*1000)/1000).toFixed(3);
  }

  function updateVisibility(){
    const mode = typeSel.value;
    if (mode === 'rc'){
      steelWrap.style.display = '';
      envRow.style.display = 'grid';
      ccRow.style.display = '';
      waterRow.style.display = 'none';
      formula.innerHTML = 'w<sub>a</sub> = max(기준값, k·c<sub>c</sub>)';
    } else {
      steelWrap.style.display = 'none';
      envRow.style.display = 'none';
      ccRow.style.display = 'none';
      waterRow.style.display = 'grid';
      formula.textContent = '수처리 구조: 표에 제시된 고정 허용값';
    }
  }

  function envLabel(key){ return ({dry:'건조', wet:'습윤', corrosive:'부식성', highcor:'고부식성'})[key] || key; }

  function compute(){
    updateVisibility();
    hint.textContent = '';
    let wa = null;

    if (typeSel.value === 'rc'){
      const steel = steelSel.value;
      const env = envSel.value;
      const rule = CRACK_KDS.rc[steel][env];

      if (!rule){
        waOut.textContent = '–';
        hint.innerHTML = '선택된 조합(긴장재 · '+envLabel(env)+')은 표에 값이 제시되지 않습니다.';
        return;
      }

      const cc = parseFloat(ccInput.value);
      if (isNaN(cc) || cc <= 0){
        waOut.textContent = '–';
        hint.textContent = '피복두께 c_c 를 입력하면 계산됩니다.';
        return;
      }

      const viaK = rule.k * cc;
      wa = Math.max(rule.base, viaK);
      waOut.textContent = format(wa);
      hint.innerHTML = '기준값 '+format(rule.base)+' mm, k·c_c = '+format(viaK)+' mm → <b>중 큰 값</b> 적용';
    } else {
      const cls = waterClassSel.value;
      const mode = waterModeSel.value;
      wa = CRACK_KDS.water[cls][mode];
      waOut.textContent = format(wa);
      hint.textContent = (cls==='clean'?'오염되지 않은 물':'오염된 액체')+' · '+(mode==='flex'?'휨인장균열':'전 단면 인장균열');
    }
  }

  [typeSel, steelSel, envSel, ccInput, waterClassSel, waterModeSel].forEach(el=>{
    el.addEventListener('input', compute);
    el.addEventListener('change', compute);
  });
  compute();
})();
</script>
<!-- Panel: Materials (빈 페이지) -->
    <section id="materials" data-panel>
  <section class="card">
    <h2>재료·배합요구사항</h2>
    <p class="note">아래 표는 첨부된 page.tsx의 MATERIAL_REQUIREMENTS 표를 SPA에 맞게 변환·삽입한 것입니다.</p>
    <div id="materialsWrap"></div>
    <div class="note" style="margin-top:10px;">
      주 1) 경량골재 콘크리트에는 적용하지 않음. 석회, 연구성과 등에 의하여 확장이 있을 때는 5% 더한 값으로 할 수 있음.<br/>
      2) KS F 2715 적용, 재령 28일～42일 사이
    </div>
<details class="collapsible" style="margin-top:16px;">
  <summary style="cursor:pointer; list-style:none; font-weight:700; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--panel);">
    보조표: KCS 14 20 44의 표 2.2-1 — 내구성으로 정해지는 최소 단위 결합재량(kg/m³)
    <span class="note" style="margin-left:8px; font-weight:400;">(클릭하여 열기/닫기)</span>
  </summary>
  <div style="padding:12px 2px 0 2px;"><div class="card" style="margin-top:8px; border:none;">
  <div style="overflow:auto; border:1px solid var(--border); border-radius:10px;">
    <table>
      <caption style="caption-side:top; text-align:left; font-weight:600; padding:8px">
        표 2.2-1 내구성으로 정해지는 최소 단위 결합재량(kg/m³) (KCS 14 20 44)
      </caption>
      <thead>
        <tr>
          <th rowspan="2" style="min-width:260px; position:sticky; left:0; background:#f9fafb;">환경구분</th>
          <th colspan="3" style="background:#f3f4f6;">굵은 골재의 최대 치수 (mm)</th>
        </tr>
        <tr>
          <th>20</th>
          <th>25</th>
          <th>40</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="position:sticky; left:0; background:#fff;">
            물보라 지역, 간만대 및 해양대기중<br/>
            <span class="note">(노출등급 ES1, ES4)</span>
          </td>
          <td class="text-center">340</td>
          <td class="text-center">330</td>
          <td class="text-center">300</td>
        </tr>
        <tr>
          <td style="position:sticky; left:0; background:#fff;">
            해중<br/>
            <span class="note">(노출등급 ES3)</span>
          </td>
          <td class="text-center">310</td>
          <td class="text-center">300</td>
          <td class="text-center">280</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="note" style="margin-top:8px;">
    주 1) KCS 14 20 10(1.9.2)에 규정된 노출등급 참조
  </div>
</div></div>
</details>
<details class="collapsible" style="margin-top:16px;">
  <summary style="cursor:pointer; list-style:none; font-weight:700; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--panel);">
    보조표: KCS 14 20 10의 표 1.9-4 — 노출범주 EA에 따른 결합재 종류
    <span class="note" style="margin-left:8px; font-weight:400;">(클릭하여 열기/닫기)</span>
  </summary>
  <div style="padding:12px 2px 0 2px;">
    <div style="overflow:auto; border:1px solid var(--border); border-radius:10px;">
      <table>
        <thead>
          <tr>
            <th style="min-width:120px; position:sticky; left:0; background:#f9fafb;">노출등급</th>
            <th style="min-width:520px;">결합재의 종류¹⁾</th>
            <th style="min-width:180px;">염화칼슘 혼화제 사용유무</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">EA1</td>
            <td>
              <ul style="padding-left:18px; margin:0;">
                <li>보통 포틀랜드 시멘트(1종)(KS L 5201) + 포졸란 혹은 슬래그</li>
                <li>중용열 포틀랜드 시멘트(2종)(KS L 5201)²⁾³⁾</li>
                <li>고로 슬래그 시멘트(KS L 5210)</li>
                <li>플라이 애시 시멘트(KS L 5211)</li>
              </ul>
            </td>
            <td class="text-center">제한 없음</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">EA2</td>
            <td>
              <ul style="padding-left:18px; margin:0;">
                <li>내황산염 포틀랜드 시멘트(5종)(KS L 5201)³⁾</li>
                <li>고로 슬래그 시멘트(KS L 5210) + 플라이 애시</li>
              </ul>
            </td>
            <td class="text-center">허용하지 않음</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">EA3</td>
            <td>
              <ul style="padding-left:18px; margin:0;">
                <li>내황산염 포틀랜드 시멘트(5종)(KS L 5201) + 포졸란 또는 슬래그⁴⁾</li>
              </ul>
            </td>
            <td class="text-center">허용하지 않음</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="note" style="margin-top:8px;">
      1) ASTM C 1012에 따라 황산염 저항성 시험을 시행하여 최대 팽창 기준을 만족하는 경우에는 결합재 조합과 다른 조합을 사용할 수 있다.<br/>
      2) 해수에 노출되는 경우에 물-결합재비가 0.40 이하이면 C<sub>3</sub>A 함량이 10%까지인 1종 또는 3종 등 다른 종류의 시멘트를 사용할 수 있다.<br/>
      3) EA1, EA2에 대해서는 1종이나 3종을 허용할 수 있다. 단, EA1은 C<sub>3</sub>A 함량이 8% 미만인 경우에 한해 허용한다.<br/>
      4) 5종 시멘트와 함께 사용할 경우에 황산염에 대한 저항을 개선한 실적이 있거나 실험에 의해 증명된 포졸란 또는 슬래그.
    </div>
  </div>
</details>
<details class="collapsible" style="margin-top:16px;">
  <summary style="cursor:pointer; list-style:none; font-weight:700; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--panel);">
    보조표: KCS 14 20 10의 표 2.2-6 — 공기연행콘크리트 공기량의 표준값
    <span class="note" style="margin-left:8px; font-weight:400;">(클릭하여 열기/닫기)</span>
  </summary>
  <div style="padding:12px 2px 0 2px;">
    <div style="overflow:auto; border:1px solid var(--border); border-radius:10px;">
      <table>
        <thead>
          <tr>
            <th rowspan="2" style="min-width:260px; position:sticky; left:0; background:#f9fafb;">굵은 골재의 최대 치수 (mm)</th>
            <th colspan="2" style="background:#f3f4f6;">공기량(%)</th>
          </tr>
          <tr>
            <th>심한 노출¹⁾</th>
            <th>일반 노출²⁾</th>
          </tr>
        </thead>
        <tbody>
          <tr><td style="position:sticky; left:0; background:#fff;">10</td><td class="text-center">7.5</td><td class="text-center">6.0</td></tr>
          <tr><td style="position:sticky; left:0; background:#fff;">15</td><td class="text-center">7.0</td><td class="text-center">5.5</td></tr>
          <tr><td style="position:sticky; left:0; background:#fff;">20</td><td class="text-center">6.0</td><td class="text-center">5.0</td></tr>
          <tr><td style="position:sticky; left:0; background:#fff;">25</td><td class="text-center">6.0</td><td class="text-center">4.5</td></tr>
          <tr><td style="position:sticky; left:0; background:#fff;">40</td><td class="text-center">5.5</td><td class="text-center">4.5</td></tr>
        </tbody>
      </table>
    </div>
    <div class="note" style="margin-top:8px;">
      1) 노출등급 EF2, EF3, EF4<br/>
      2) 노출등급 EF1
    </div>
  </div>
</details>
<details class="collapsible" style="margin-top:16px;">
  <summary style="cursor:pointer; list-style:none; font-weight:700; padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:var(--panel);">
    보조표: KCS 14 20 10의 표 2.2-7 — 제빙화학제¹⁾에 노출된 콘크리트 최대 혼화재 비율
    <span class="note" style="margin-left:8px; font-weight:400;">(클릭하여 열기/닫기)</span>
  </summary>
  <div style="padding:12px 2px 0 2px;">
    <div style="overflow:auto; border:1px solid var(--border); border-radius:10px;">
      <table>
        <thead>
          <tr>
            <th style="min-width:520px; position:sticky; left:0; background:#f9fafb;">혼화재의 종류</th>
            <th style="min-width:240px;">시멘트와 혼화재 전체에 대한 혼화재의 질량 백분율(%)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">KS L 5405에 따르는 플라이 애시 또는 기타 포졸란</td>
            <td class="text-center">25</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">KS F 2563에 따르는 고로 슬래그 미분말</td>
            <td class="text-center">50</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">실리카 흄</td>
            <td class="text-center">10</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">플라이 애시 또는 기타 포졸란, 고로 슬래그 미분말 및 실리카 흄의 합</td>
            <td class="text-center">50²⁾</td>
          </tr>
          <tr>
            <td style="position:sticky; left:0; background:#fff;">플라이 애시 또는 기타 포졸란과 실리카 흄의 합</td>
            <td class="text-center">35²⁾</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="note" style="margin-top:8px;">
      1) 노출등급 EF4에 해당함.<br/>
      2) 플라이 애시 또는 기타 포졸란의 합은 25% 이하, 실리카 흄은 10% 이하이어야 한다.
    </div>
  </div>
</details>
  </section>
</section>
  </main>

  <!-- Modal for image/iframe preview -->
  <div class="modal" id="imgModal" aria-modal="true">
    <div class="modal-content">
      <button class="close-x" id="closeModalX" aria-label="닫기">×</button>
<img id="modalImg" alt="preview" />
      <iframe id="modalFrame" allowfullscreen></iframe>
      <div class="modal-footer">
        <span id="modalCaption"></span>
        <button class="btn secondary" id="closeModal" type="button">닫기</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- SPA routing (tabs) ----------
    const tabs = Array.from(document.querySelectorAll('.navtab'));
    const panels = Array.from(document.querySelectorAll('[data-panel]'));
    function activate(hash){
      const id = (hash || '#strength');
      tabs.forEach(btn=>{ btn.setAttribute('aria-selected', btn.dataset.target === id ? 'true' : 'false'); });
      panels.forEach(p=>{ p.dataset.active = ('#'+p.id) === id ? 'true' : 'false'; });
    }
    tabs.forEach(btn=> btn.addEventListener('click', ()=>{ location.hash = btn.dataset.target; }));
    window.addEventListener('hashchange', ()=> activate(location.hash));
    activate(location.hash);

    // ---------- Data ----------
    const DATA = {"KOR_Class_table_Main": [{"Key_A": "A1", "KR_Class1": "E", "KR_Class2": "일반", "KR_Exposure_Class": "E0", "Min_Con_Str": 21, "Considertations": "물리적, 화학적 작용에 의한 콘크리트 손상의 우려가 없는 경우\n철근이나 내부 금속의 부식 위험이 없는 경우", "Description": "공기 중 습도가 매우 낮은 건물 내부의 콘크리트", "Remarks": null, "Member": ["건물내부"], "Exposure_Condition": ["항상 습도가 낮게 유지(건조실 등)"]}, {"Key_A": "A2", "KR_Class1": "EC", "KR_Class2": "탄산화", "KR_Exposure_Class": "EC1", "Min_Con_Str": 21, "Considertations": "건조하거나 수분으로부터 보호되는 또는 영구적으로 습윤한 콘크리트", "Description": "공기 중 습도가 낮은 건물 내부의 콘크리트\n물에 계속 침지 되어 있는 콘크리트", "Remarks": null, "Member": ["건물내부"], "Exposure_Condition": ["건조"]}, {"Key_A": "A3", "KR_Class1": "EC", "KR_Class2": "탄산화", "KR_Exposure_Class": "EC2", "Min_Con_Str": 24, "Considertations": "습윤하고 드물게 건조되는 콘크리트로 탄산화의 위험이 보통인 경우", "Description": "장기간 물과 접하는 콘크리트 표면\n외기에 노출되는 기초", "Remarks": null, "Member": ["건물내부", "교각", "기초", "외부에 노출된 슬래브, 옥상", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["습윤", "외기 노출(습윤)", "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "흙에 묻힌 부분", "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출"]}, {"Key_A": "A4", "KR_Class1": "EC", "KR_Class2": "탄산화", "KR_Exposure_Class": "EC3", "Min_Con_Str": 27, "Considertations": "보통 정도의 습도에 노출되는 콘크리트로 탄산화 위험이 비교적 높은  경우", "Description": "공기 중 습도가 보통 이상으로 높은 건물 내부의 콘크리트\n비를 맞지 않는 외부 콘크리트", "Remarks": "중공 구조물의 내부는 노출등급 EC3로 간주할 수 있다. 다만, 외부로부터 물이 침투하거나 노출되어 영향을 받을 수 있는 표면은 EC4로 간주하여야 한다.", "Member": ["교각", "기초", "외부에 노출된 슬래브, 옥상", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "외기 노출(건습반복)", "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중"]}, {"Key_A": "A5", "KR_Class1": "EC", "KR_Class2": "탄산화", "KR_Exposure_Class": "EC4", "Min_Con_Str": 30, "Considertations": "건습이 반복되는 콘크리트로 매우 높은 탄산화 위험에 노출되는 경우", "Description": "EC2 등급에 해당하지 않고, 물과 접하는 콘크리트\n(예를 들어 비를 맞는 콘크리트 외벽, 난간 등)", "Remarks": "비를 맞는 외부 콘크리트라 하더라도 규정에 따라 방수 처리된 표면은 노출등급 EC3로 간주할 수 있다.", "Member": ["교각", "기초", "외부에 노출된 슬래브, 옥상", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "외기 노출(건습반복)", "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중"]}, {"Key_A": "A6", "KR_Class1": "ES", "KR_Class2": "해양환경, 제빙화학제 등 염화물", "KR_Exposure_Class": "ES1", "Min_Con_Str": 30, "Considertations": "보통 정도의 습도에서 대기 중의 염화물에 노출되지만 해수 또는 염화물을 함유한 물에 직접 접하지 않는 콘크리트", "Description": "해안가 또는 해안 근처에 있는 구조물\n도로 주변에 위치하여 공기중의 제빙화학제에 노출되는 콘크리트", "Remarks": "비래염분의 영향을 받는 콘크리트로 해양환경의 경우 해안가로부터 거리에 따른 비래염분량은 지역마다 큰 차이가 있으므로 측정결과 등을 바탕으로 한계영향 거리를 정해야 한다. 또한 공기 중의 제빙화학제에 영향을 받는 거리도 지역에 따라 편차가 크게 나타나므로 기존 구조물의 염화물 측정결과 등으로부터 한계 영향 거리를 정하는 것이 바람직하다.", "Member": ["교각", "기초", "외부에 노출된 슬래브, 옥상", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["비래염분 영역", "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "해상대기중"]}, {"Key_A": "A7", "KR_Class1": "ES", "KR_Class2": "해양환경, 제빙화학제 등 염화물", "KR_Exposure_Class": "ES2", "Min_Con_Str": 30, "Considertations": "습윤하고 드물게 건조되며 염화물에 노출되는 콘크리트", "Description": "습윤하고 드물게 건조되며 염화물에 노출되는 콘크리트", "Remarks": "수영장\n염화물을 함유한 공업용수에 노출되는 콘크리트", "Member": ["교각", "기초", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["흙에 묻힌 부분, 염화물을 포함된 지하수에 노출"]}, {"Key_A": "A8", "KR_Class1": "ES", "KR_Class2": "해양환경, 제빙화학제 등 염화물", "KR_Exposure_Class": "ES3", "Min_Con_Str": 35, "Considertations": "항상 해수에 침지되는 콘크리트", "Description": "항상 해수에 침지되는 콘크리트", "Remarks": "해상 교각의 해수 중에 침지되는 부분", "Member": ["교각", "기초", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["해수에 항상 침지되는 콘크리트"]}, {"Key_A": "A9", "KR_Class1": "ES", "KR_Class2": "해양환경, 제빙화학제 등 염화물", "KR_Exposure_Class": "ES4", "Min_Con_Str": 35, "Considertations": "건습이 반복되면서 해수 또는 염화물에 노출되는 콘크리트", "Description": "해양 환경의 물보라 지역(비말대) 및 간만대에 위치한 콘크리트\n염화물을 함유한 물보라에 직접 노출되는 교량 부위\n도로 포장\n주차장", "Remarks": "(교량) 차도로부터수평방향 10m, 수직방향 5m 이내에 있는 모든 콘크리트 노출면은 제빙화학제에 직접 노출되는 것으로 간주해야 한다. 또한 도로로부터 배출되는 물에 노출되기 쉬운 신축이음(expansion joints) 아래에 있는 교각 상부도 제빙화학제에 직접 노출되는 것으로 간주해야 한다.\n(주차장) 염화물이 포함된 물에 노출되는 주차장의 바닥, 벽체, 기둥 등에 적용한다.", "Member": ["교각", "교량 바닥판", "기초", "주차장 바닥", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "조건없음"]}, {"Key_A": "A10", "KR_Class1": "EF", "KR_Class2": "동결융해", "KR_Exposure_Class": "EF1", "Min_Con_Str": 24, "Considertations": "간혹 수분과 접촉하나 염화물에 노출되지 않고 동결융해의 반복작용에 노출되는 콘크리트", "Description": "비와 동결에 노출되는 수직 콘크리트 표면", "Remarks": null, "Member": ["교각", "기초", "무근콘크리트_수직면", "무근콘크리트_수평면", "외부에 노출된 슬래브, 옥상", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["외기 노출(건습반복)", "외기 노출(습윤)"]}, {"Key_A": "A11", "KR_Class1": "EF", "KR_Class2": "동결융해", "KR_Exposure_Class": "EF2", "Min_Con_Str": 27, "Considertations": "간혹 수분과 접촉하고 염화물에 노출되며 동결융해의 반복작용에 노출되는 콘크리트", "Description": "공기 중 제빙화학제와 동결에 노출되는 도로구조물의 수직 콘크리트 표면", "Remarks": null, "Member": ["교각", "교량 바닥판", "기초", "무근콘크리트_수직면", "무근콘크리트_수평면", "외부에 노출된 슬래브, 옥상", "주차장 바닥", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["비래염분 영역", "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "조건없음"]}, {"Key_A": "A12", "KR_Class1": "EF", "KR_Class2": "동결융해", "KR_Exposure_Class": "EF3", "Min_Con_Str": 30, "Considertations": "지속적으로 수분과 접촉하나 염화물에 노출되지 않고 동결융해의 반복작용에 노출되는 콘크리트", "Description": "비와 동결에 노출되는 수평 콘크리트 표면", "Remarks": null, "Member": ["무근콘크리트_수평면", "외부에 노출된 슬래브, 옥상"], "Exposure_Condition": ["외기 노출(건습반복)", "외기 노출(습윤)"]}, {"Key_A": "A13", "KR_Class1": "EF", "KR_Class2": "동결융해", "KR_Exposure_Class": "EF4", "Min_Con_Str": 30, "Considertations": "지속적으로 수분과 접촉하고 염화물에 노출되며 동결융해의 반복작용에 노출되는 콘크리트", "Description": "제빙화학제에 노출되는 도로와 교량 바닥판\n제빙화학제가 포함된 물과 동결에 노출되는 콘크리트 표면\n동결에 노출되는 물보라 지역(비말대) 및 간만대에 위치한 해양 콘크리트", "Remarks": null, "Member": ["교각", "교량 바닥판", "기초", "무근콘크리트", "무근콘크리트_수평면", "외부에 노출된 슬래브, 옥상", "주차장 바닥", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "조건없음"]}, {"Key_A": "A14", "KR_Class1": "EA", "KR_Class2": "황산염", "KR_Exposure_Class": "EA1", "Min_Con_Str": 27, "Considertations": "보통 수준의 황산염이온에 노출되는 콘크리트(표 4.1-2)", "Description": "토양과 지하수에 노출되는 콘크리트\n해수에 노출되는 콘크리트", "Remarks": null, "Member": ["교각", "기초", "무근콘크리트", "주탑 외부 기둥(필로티 포함) 외벽", "항만"], "Exposure_Condition": ["바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "해수에 항상 침지되는 콘크리트", "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출"]}, {"Key_A": "A15", "KR_Class1": "EA", "KR_Class2": "황산염", "KR_Exposure_Class": "EA2", "Min_Con_Str": 30, "Considertations": "유해한 수준의 황산염이온에 노출되는 콘크리트(표 4.1-2)", "Description": "토양과 지하수에 노출되는 콘크리트", "Remarks": null, "Member": ["교각", "기초", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출"]}, {"Key_A": "A16", "KR_Class1": "EA", "KR_Class2": "황산염", "KR_Exposure_Class": "EA3", "Min_Con_Str": 30, "Considertations": "매우 유해한 수준의 황산염이온에 노출되는 콘크리트(표 4.1-2)", "Description": "토양과 지하수에 노출되는 콘크리트\n하수, 오·폐수에 노출되는 콘크리트", "Remarks": null, "Member": ["교각", "기초", "주탑 외부 기둥(필로티 포함) 외벽"], "Exposure_Condition": ["흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출"]}], "KOR_Sulphate_Soil": [{"Key_B_황산": "B1", "KR_Exposure_Class": "EA1", "Min": 0.001, "Max": 0.002, "Unit": "%", "비고": "토양내의 수용성 황산염", "측정조건": "토양 질량에 대한 비로 KS I ISO 11048에 따라 측정하여야 한다."}, {"Key_B_황산": "B2", "KR_Exposure_Class": "EA2", "Min": 0.002, "Max": 0.02, "Unit": "%", "비고": "토양내의 수용성 황산염", "측정조건": "토양 질량에 대한 비로 KS I ISO 11048에 따라 측정하여야 한다."}, {"Key_B_황산": "B3", "KR_Exposure_Class": "EA3", "Min": 0.02, "Max": NaN, "Unit": "%", "비고": "토양내의 수용성 황산염", "측정조건": "토양 질량에 대한 비로 KS I ISO 11048에 따라 측정하여야 한다."}], "KOR_Sulphate_Water": [{"Key_C_황산": "C1", "KR_Exposure_Class": "EA1", "Min": 150, "Max": 1500.0, "Unit": "ppm", "비고": "물속에 용해된 황산염", "측정조건": "수용액에 용해된 농도로 ASTM D516 또는 ASTM D4130에 따라 측정하여야 한다."}, {"Key_C_황산": "C2", "KR_Exposure_Class": "EA2", "Min": 1500, "Max": 10000.0, "Unit": "ppm", "비고": "물속에 용해된 황산염", "측정조건": "수용액에 용해된 농도로 ASTM D516 또는 ASTM D4130에 따라 측정하여야 한다."}, {"Key_C_황산": "C3", "KR_Exposure_Class": "EA3", "Min": 10000, "Max": NaN, "Unit": "ppm", "비고": "물속에 용해된 황산염", "측정조건": "수용액에 용해된 농도로 ASTM D516 또는 ASTM D4130에 따라 측정하여야 한다."}], "KOR_Guide": [{"Key_E_Guide": 1, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 2, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 3, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 4, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 5, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 6, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 7, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "ES2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 8, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "ES2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 9, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 염화물을 포함된 지하수에 노출", "KR_Exposure_Class": "ES2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 10, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 11, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 12, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 13, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 14, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 15, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 16, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 17, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 18, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 19, "Member": "기초", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 20, "Member": "교각", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 21, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "흙에 묻힌 부분, 황산염을 포함한 흙 또는 지하수에 노출", "KR_Exposure_Class": "EA3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 22, "Member": "기초", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 23, "Member": "교각", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 24, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 25, "Member": "기초", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 26, "Member": "교각", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 27, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 28, "Member": "기초", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 29, "Member": "교각", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 30, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 31, "Member": "기초", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 32, "Member": "교각", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 33, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 34, "Member": "기초", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 35, "Member": "교각", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 36, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 37, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 38, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 39, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 40, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 41, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 42, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 43, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 44, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 45, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 46, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 47, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 48, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 49, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 50, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 51, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 52, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 53, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 54, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 55, "Member": "기초", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 56, "Member": "교각", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 57, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 58, "Member": "기초", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 59, "Member": "교각", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 60, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 61, "Member": "기초", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 62, "Member": "교각", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 63, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 64, "Member": "기초", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 65, "Member": "교각", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 66, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 67, "Member": "기초", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EF4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 68, "Member": "교각", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EF4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 69, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EF4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 70, "Member": "기초", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 71, "Member": "교각", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 72, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 73, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 74, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF3", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 75, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 76, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 77, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 78, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 79, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 80, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 81, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 82, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF3", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 83, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 84, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 85, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EC3", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 86, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 87, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 88, "Member": "외부에 노출된 슬래브, 옥상", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 89, "Member": "교량 바닥판", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 90, "Member": "교량 바닥판", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 91, "Member": "교량 바닥판", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 92, "Member": "주차장 바닥", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 93, "Member": "주차장 바닥", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 94, "Member": "주차장 바닥", "Exposure_Condition": "조건없음", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 95, "Member": "건물내부", "Exposure_Condition": "습윤", "KR_Exposure_Class": "EC2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 96, "Member": "건물내부", "Exposure_Condition": "건조", "KR_Exposure_Class": "EC1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 97, "Member": "건물내부", "Exposure_Condition": "항상 습도가 낮게 유지(건조실 등)", "KR_Exposure_Class": "E0", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 98, "Member": "무근콘크리트", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EF4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 99, "Member": "무근콘크리트", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 100, "Member": "무근콘크리트_수직면", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 101, "Member": "무근콘크리트_수직면", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 102, "Member": "무근콘크리트_수직면", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 103, "Member": "무근콘크리트_수직면", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 104, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF3", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 105, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF3", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 106, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(습윤)", "KR_Exposure_Class": "EF1", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 107, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(건습반복)", "KR_Exposure_Class": "EF1", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 108, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 109, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF4", "방수여부": "No", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 110, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(습윤), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 111, "Member": "무근콘크리트_수평면", "Exposure_Condition": "외기 노출(건습반복), 대기중 제설염 영향지역 또는 해안 대기중", "KR_Exposure_Class": "EF2", "방수여부": "Yes", "방수조건영향여부": "영향 있음"}, {"Key_E_Guide": 112, "Member": "기초", "Exposure_Condition": "해수에 항상 침지되는 콘크리트", "KR_Exposure_Class": "ES3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 113, "Member": "교각", "Exposure_Condition": "해수에 항상 침지되는 콘크리트", "KR_Exposure_Class": "ES3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 114, "Member": "주탑 외부 기둥(필로티 포함) 외벽", "Exposure_Condition": "해수에 항상 침지되는 콘크리트", "KR_Exposure_Class": "ES3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 115, "Member": "항만", "Exposure_Condition": "해수에 항상 침지되는 콘크리트", "KR_Exposure_Class": "ES3", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 116, "Member": "항만", "Exposure_Condition": "해수에 항상 침지되는 콘크리트", "KR_Exposure_Class": "EA1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 117, "Member": "항만", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "ES4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 118, "Member": "항만", "Exposure_Condition": "바닷물에 노출(비말대, 간만대) 또는 제설염이 녹은 물에 직접 노출", "KR_Exposure_Class": "EF4", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 119, "Member": "항만", "Exposure_Condition": "비래염분 영역", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 120, "Member": "항만", "Exposure_Condition": "비래염분 영역", "KR_Exposure_Class": "EF2", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}, {"Key_E_Guide": 121, "Member": "항만", "Exposure_Condition": "해상대기중", "KR_Exposure_Class": "ES1", "방수여부": "해당 없음", "방수조건영향여부": "영향 없음"}]};
    const MAIN = DATA["KOR_Class_table_Main"] || [];
    const SOIL = DATA["KOR_Sulphate_Soil"] || [];
    const WATER = DATA["KOR_Sulphate_Water"] || [];
    const GUIDE = DATA["KOR_Guide"] || [];

    const state = { kr:"", member:"", exposure:"", q:"" };
    const distinct = (arr)=> Array.from(new Set(arr)).filter(Boolean).sort();
    const filterRows = (baseRows, opts)=>{
      let rows = [...baseRows];
      if (opts.kr) rows = rows.filter(r => String(r.KR_Class1) === opts.kr);
      if (opts.member) rows = rows.filter(r => (r.Member || []).includes(opts.member));
      if (opts.exposure) rows = rows.filter(r => String(r.KR_Exposure_Class) === opts.exposure);
      if (opts.q) rows = rows.filter(r => Object.values(r).some(v => Array.isArray(v) ? v.join(',').toLowerCase().includes(opts.q) : String(v).toLowerCase().includes(opts.q)));
      return rows;
    };

    // ---- Strength: UI builders ----
    function renderKRPills(){
      const wrap = document.getElementById('krPills');
      if (!wrap) return;
      const KR_LIST = distinct(MAIN.map(r=>r.KR_Class1));
      wrap.innerHTML = '';
      KR_LIST.forEach(v=>{
        const el = document.createElement('button');
        el.className = 'pill' + (state.kr === v ? ' active' : '');
        el.textContent = v;
        el.onclick = ()=>{ state.kr = (state.kr===v ? '' : v); state.member=''; state.exposure=''; renderMemberChips(); renderExoGrid(); apply(); renderKRPills(); };
        wrap.appendChild(el);
      });
    }
    function renderMemberChips(){
      const wrap = document.getElementById('memberChips');
      if (!wrap) return;
      const rows = filterRows(MAIN, { kr:state.kr, exposure:state.exposure, q:'' });
      const memberOptions = distinct([].concat(...rows.map(r=> r.Member || [])));
      wrap.innerHTML = '';
      memberOptions.forEach(v=>{
        const el = document.createElement('span');
        el.className = 'chip' + (state.member === v ? ' active' : '');
        el.textContent = v;
        el.onclick = ()=>{ state.member = (state.member===v ? '' : v); renderExoGrid(); apply(); renderMemberChips(); };
        wrap.appendChild(el);
      });
      if (!memberOptions.length) wrap.innerHTML = '<span class="note">해당 Member 없음</span>';
    }
    function renderExoGrid(){
      const wrap = document.getElementById('exogrid');
      if (!wrap) return;
      const rows = filterRows(MAIN, { kr:state.kr, member:state.member, q:'' });
      const exos = distinct(rows.map(r=> r.KR_Exposure_Class));
      wrap.innerHTML = '';
      exos.forEach(v=>{
        const el = document.createElement('div');
        el.className = 'exo' + (state.exposure === v ? ' active' : '');
        el.textContent = v;
        el.onclick = ()=>{ state.exposure = (state.exposure===v ? '' : v); renderMemberChips(); apply(); renderExoGrid(); };
        wrap.appendChild(el);
      });
      if (!exos.length) wrap.innerHTML = '<span class="note">해당 세부 등급 없음</span>';
    }

    function renderMainTable(rows){
      const mount = document.getElementById('tableWrap');
      if (!mount) return;
      if (!rows.length){ mount.innerHTML = '<p class="note">표시할 데이터가 없습니다.</p>'; return; }
      const columns = [
        ['KR_Class1','노출등급'],
        ['KR_Class2','등급 상세'],
        ['KR_Exposure_Class','세부 등급'],
        ['Min_Con_Str','최소 강도 (MPa)'],
        ['Considertations','Considerations'],
        ['Description','Description']
      ];
      let html = '<div style="overflow:auto; border:1px solid var(--border); border-radius:12px; max-height:420px;"><table><thead><tr>'
                + columns.map(c=>`<th>${c[1]}</th>`).join('') + '</tr></thead><tbody>';
      rows.forEach(r=>{
        html += '<tr>';
        columns.forEach(([k])=>{
          const val = (Array.isArray(r[k])? r[k].join(', ') : (r[k] ?? ''));
          const hl = (k==='Min_Con_Str') ? ' class="hl"' : '';
          html += `<td${hl}>${val}</td>`;
        });
        html += '</tr>';
      });
      html += '</tbody></table></div>';
      mount.innerHTML = html;
    }

    function renderGuideFiltered(){
      const mount = document.getElementById('guideWrapFiltered');
      if (!mount) return;
      let grows = [...(GUIDE||[])];
      if (state.member) grows = grows.filter(r => String(r['Member'] ?? '') === state.member);
      if (state.exposure) grows = grows.filter(r => String(r['KR_Exposure_Class'] ?? '') === state.exposure);
      else if (state.kr) {
        const exoSet = new Set(filterRows(MAIN, { kr: state.kr, q: '' }).map(r => r.KR_Exposure_Class));
        grows = grows.filter(r => exoSet.has(r['KR_Exposure_Class']));
      }
      if (!grows.length){ mount.innerHTML = '<p class="note">현재 선택에 해당하는 가이드 데이터가 없습니다.</p>'; return; }
      const displayRows = grows.map(src=>{
        const dst = { };
        Object.keys(src).forEach(k=>{
          if (k==='Key_E_Guide' || k==='Key_e_Guide') return; // drop
          if (k==='KR_Exposure_Class') dst['세부등급'] = src[k];
          else dst[k] = src[k];
        });
        return dst;
      });
      const keys = Object.keys(displayRows[0]);
      let html = '<div style="overflow:auto; border:1px solid var(--border); border-radius:12px; max-height:320px;"><table><thead><tr>' + keys.map(k=>`<th>${k}</th>`).join('') + '</tr></thead><tbody>';
      displayRows.forEach(r=>{ html += '<tr>'; keys.forEach(k=> html += `<td>${r[k] == null ? '' : r[k]}</td>`); html += '</tr>'; });
      html += '</tbody></table></div>';
      mount.innerHTML = html;
    }

    
    // Simple table renderer for auxiliary tables
    function renderSimple(rows, mountId){
      const m = document.getElementById(mountId);
      if (!m) return;
      if (!rows || !rows.length){
        m.innerHTML = '<p class="note">데이터 없음</p>';
        return;
      }
      const keys = Object.keys(rows[0]);
      let html = '<div style="overflow:auto; border:1px solid var(--border); border-radius:12px; max-height:320px;"><table><thead><tr>';
      keys.forEach(k => html += `<th>${k}</th>`);
      html += '</tr></thead><tbody>';
      rows.forEach(r => { html += '<tr>'; keys.forEach(k => html += `<td>${r[k] == null ? '' : r[k]}</td>`); html += '</tr>'; });
      html += '</tbody></table></div>';
      m.innerHTML = html;
    }

    function apply(){
      const q = (document.getElementById('searchBox')?.value || '').toLowerCase();
      state.q = q;
      const rows = filterRows(MAIN, state);
      renderMainTable(rows);
      renderGuideFiltered();
      return rows;
    }

    // Toolbar & init
    document.getElementById('searchBox')?.addEventListener('keyup', apply);
    document.getElementById('resetBtn')?.addEventListener('click', ()=>{
      state.kr=''; state.member=''; state.exposure='';
      const sb = document.getElementById('searchBox'); if (sb) sb.value='';
      renderKRPills(); renderMemberChips(); renderExoGrid(); apply();
    });
    document.getElementById('exportBtn')?.addEventListener('click', ()=>{
      const rows = apply(); if (!rows.length) return;
      const cols = Object.keys(rows[0]);
      const header = cols.join(',');
      const body = rows.map(r=> cols.map(c=>`"${String(Array.isArray(r[c])? r[c].join('; ') : (r[c] ?? '')).replace(/"/g,'""')}"`).join(',')).join('\n');
      const csv = header + '\n' + body;
      const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='filtered_min_strength.csv';
      document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url);
    });

    renderKRPills();
    renderMemberChips();
    renderExoGrid();
    apply();
    // render auxiliary tables
    renderSimple(SOIL, 'soilWrap');
    renderSimple(WATER, 'waterWrap');

    // ---- Image/iframe modal ----
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('modalImg');
    const modalFrame = document.getElementById('modalFrame');
    const modalCaption = document.getElementById('modalCaption');
    document.getElementById('exposureThumbs')?.addEventListener('click', (e)=>{
      const fig = e.target.closest('.thumb');
      if (!fig) return;
      const isIframe = fig.dataset.embed === 'iframe' || !!fig.querySelector('iframe');
      modalImg.style.display = 'none';
      modalFrame.style.display = 'none';
      
      // Shrink rule: strength #1, #2 should render at 80% in modal
      const caption = (fig.dataset.caption || '').trim();
      const shrink = (caption === '항만' || caption === '해상교량');
      // Reset any previous sizing first
      modalImg.style.maxWidth = shrink ? '80%' : '100%';
      modalImg.style.maxHeight = shrink ? '80%' : '100%';
if (isIframe) {
        const f = fig.querySelector('iframe'); if (!f) return;
        modalFrame.src = f.src; modalFrame.style.display = 'block';
      } else {
        const img = fig.querySelector('img'); if (!img) return;
        modalImg.src = img.src; modalImg.style.display = 'block';
      }
      modalCaption.textContent = fig.dataset.caption || '';
      modal.classList.add('open');
    });
    document.getElementById('closeModal')?.addEventListener('click', ()=>{ modal.classList.remove('open'); modalImg.src=''; modalFrame.src=''; modalImg.style.display='none'; modalFrame.style.display='none'; });
    modal.addEventListener('click', (e)=>{ if (e.target === modal) { modal.classList.remove('open'); 
    document.getElementById('closeModalX')?.addEventListener('click', ()=>{
      modal.classList.remove('open');
      modalImg.src=''; modalFrame.src='';
      modalImg.style.display='none'; modalFrame.style.display='none';
    });
    window.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && modal.classList.contains('open')){
        modal.classList.remove('open');
        modalImg.src=''; modalFrame.src='';
        modalImg.style.display='none'; modalFrame.style.display='none';
      }
    });
modalImg.src=''; modalFrame.src=''; modalImg.style.display='none'; modalFrame.style.display='none'; } });
  

// ---------- Materials: table from page.tsx ----------
const MATERIAL_REQUIREMENTS = [
  {
    category: "내구성 기준압축강도 fcd (MPa)",
    E0: "21", EC1: "21", EC2: "24", EC3: "27", EC4: "30",
    ES1: "30", ES2: "30", ES3: "35", ES4: "35",
    EF1: "24", EF2: "27", EF3: "30", EF4: "30",
    EA1: "27", EA2: "30", EA3: "30",
  },
  {
    category: "최대 물-결합재비¹⁾",
    E0: "–", EC1: "0.60", EC2: "0.55", EC3: "0.50", EC4: "0.45",
    ES1: "0.45", ES2: "0.45", ES3: "0.40", ES4: "0.40",
    EF1: "0.55", EF2: "0.50", EF3: "0.45", EF4: "0.45",
    EA1: "0.50", EA2: "0.45", EA3: "0.45",
  },
  {
    category: "최소 단위결합재량 (kg/m³)",
    E0: "–", EC1: "–", EC2: "–", EC3: "–", EC4: "–",
    ES1: "KCS 14 20 44의 표 2.2-1", ES1_colspan: 4, ES2: "", ES3: "", ES4: "",
    EF1: "–", EF2: "–", EF3: "–", EF4: "–",
    EA1: "–", EA2: "–", EA3: "–",
  },
  {
    category: "최소 공기량(%)",
    E0: "–", EC1: "–", EC2: "–", EC3: "–", EC4: "–",
    ES1: "–", ES2: "–", ES3: "–", ES4: "–",
    EF1: "KCS 14 20 10의 표 2.2-6", EF1_colspan: 4, EF2: "", EF3: "", EF4: "",
    EA1: "–", EA2: "–", EA3: "–",
  },
  {
    category: "수용성 염소 이온량 (결합재 중량비 %)",
    subcategory: "  무근 콘크리트",
    E0: "–", EC1: "–", EC2: "–", EC3: "–", EC4: "–",
    ES1: "–", ES2: "–", ES3: "–", ES4: "–",
    EF1: "–", EF2: "–", EF3: "–", EF4: "–",
    EA1: "–", EA2: "–", EA3: "–",
  },
  {
    category: "",
    subcategory: "  철근 콘크리트",
    E0: "1.00", EC1: "0.30", EC2: "0.30", EC3: "0.30", EC4: "0.30",
    ES1: "0.15", ES2: "0.15", ES3: "0.15", ES4: "0.15",
    EF1: "0.30", EF2: "0.30", EF3: "0.30", EF4: "0.30",
    EA1: "0.30", EA2: "0.30", EA3: "0.30",
  },
  {
    category: "",
    subcategory: "  프리스트레스트 콘크리트",
    E0: "0.06", EC1: "0.06", EC2: "0.06", EC3: "0.06", EC4: "0.06",
    ES1: "0.06", ES2: "0.06", ES3: "0.06", ES4: "0.06",
    EF1: "0.06", EF2: "0.06", EF3: "0.06", EF4: "0.06",
    EA1: "0.06", EA2: "0.06", EA3: "0.06",
  },
  {
    category: "추가 요구조건",
    E0: "–", EC1: "–", EC2: "–", EC3: "–", EC4: "–",
    ES1: "–", ES2: "–", ES3: "–", ES4: "–",
    EF1: "KCS 14 20 10의 표 2.2-7", EF1_colspan: 4, EF2: "", EF3: "", EF4: "",
    EA1: "KCS 14 20 10의 표 1.9-4", EA1_colspan: 3, EA2: "", EA3: "",
  },
];

function renderMaterialsTable(){
  const mount = document.getElementById('materialsWrap');
  if (!mount) return;

  // Build two-tier header
  const groupHead = `
    <tr>
      <th rowspan="2" style="position:sticky; left:0; background:#f9fafb; min-width:220px;">항목</th>
      <th style="background:#f3f4f6;">일반</th>
      <th colspan="4" style="background:#e8f1ff; border-left:1px solid var(--border);">노출환경 및 등급</th>
      <th colspan="4" style="background:#eaffe8; border-left:1px solid var(--border);">ES<br>(해양환경, 제설염 등 염화물)</th>
      <th colspan="4" style="background:#fff8dc; border-left:1px solid var(--border);">EF<br>(동결융해)</th>
      <th colspan="3" style="background:#ffecec; border-left:1px solid var(--border);">EA<br>(황산염)</th>
    </tr>
    <tr>
      <th style="background:#f3f4f6;">E0</th>
      <th style="background:#e8f1ff;">EC1</th>
      <th style="background:#e8f1ff;">EC2</th>
      <th style="background:#e8f1ff;">EC3</th>
      <th style="background:#e8f1ff;">EC4</th>
      <th style="background:#eaffe8;">ES1</th>
      <th style="background:#eaffe8;">ES2</th>
      <th style="background:#eaffe8;">ES3</th>
      <th style="background:#eaffe8;">ES4</th>
      <th style="background:#fff8dc;">EF1</th>
      <th style="background:#fff8dc;">EF2</th>
      <th style="background:#fff8dc;">EF3</th>
      <th style="background:#fff8dc;">EF4</th>
      <th style="background:#ffecec;">EA1</th>
      <th style="background:#ffecec;">EA2</th>
      <th style="background:#ffecec;">EA3</th>
    </tr>`;

  let html = '<div style="overflow:auto; border:1px solid var(--border); border-radius:12px;">' +
             '<table><thead>' + groupHead + '</thead><tbody>';

  MATERIAL_REQUIREMENTS.forEach(row => {
    html += '<tr>';

    // First column (sticky)
    const cat = row.category || '';
    const sub = row.subcategory ? `<div class="note" style="margin-top:2px;">${row.subcategory}</div>` : '';
    html += `<td style="position:sticky; left:0; background:#fff; border-right:1px solid var(--border); font-weight:600;">${cat}${sub}</td>`;

    // E0
    html += `<td class="text-center" style="text-align:center;">${row.E0 ?? ''}</td>`;

    // EC1..EC4
    html += `<td style="text-align:center;">${row.EC1 ?? ''}</td>`;
    html += `<td style="text-align:center;">${row.EC2 ?? ''}</td>`;
    html += `<td style="text-align:center;">${row.EC3 ?? ''}</td>`;
    html += `<td style="text-align:center;">${row.EC4 ?? ''}</td>`;

    // ES1..ES4 with optional colspan from ES1_colspan
    if (row.ES1_colspan) {
      html += `<td colspan="${row.ES1_colspan}" style="text-align:center;">${row.ES1 ?? ''}</td>`;
    } else {
      html += `<td style="text-align:center;">${row.ES1 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.ES2 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.ES3 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.ES4 ?? ''}</td>`;
    }

    // EF1..EF4 with optional colspan from EF1_colspan
    if (row.EF1_colspan) {
      html += `<td colspan="${row.EF1_colspan}" style="text-align:center;">${row.EF1 ?? ''}</td>`;
    } else {
      html += `<td style="text-align:center;">${row.EF1 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.EF2 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.EF3 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.EF4 ?? ''}</td>`;
    }

    // EA1..EA3 with optional colspan from EA1_colspan
    if (row.EA1_colspan) {
      html += `<td colspan="${row.EA1_colspan}" style="text-align:center;">${row.EA1 ?? ''}</td>`;
    } else {
      html += `<td style="text-align:center;">${row.EA1 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.EA2 ?? ''}</td>`;
      html += `<td style="text-align:center;">${row.EA3 ?? ''}</td>`;
    }

    html += '</tr>';
  });

  html += '</tbody></table></div>';
  mount.innerHTML = html;
}

renderMaterialsTable();

// ---- COVER PANEL (KDS_14_cover) ----
const COVER_ROWS = [{"No.": "1", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "수중타설", "부재종류": "All_element", "철근/긴장재": "All_rebar", "최소피복 (mm)": "100"}, {"No.": "2", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "흙타설_거푸집없이", "부재종류": "All_element", "철근/긴장재": "All_rebar", "최소피복 (mm)": "75"}, {"No.": "3", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "All_element", "철근/긴장재": "D19이상", "최소피복 (mm)": "50"}, {"No.": "4", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "All_element", "철근/긴장재": "D16이하", "최소피복 (mm)": "40"}, {"No.": "5", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브", "철근/긴장재": "D35초과", "최소피복 (mm)": "40"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "벽체", "철근/긴장재": "D35초과", "최소피복 (mm)": "40"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "장선", "철근/긴장재": "D35초과", "최소피복 (mm)": "40"}, {"No.": "6", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브", "철근/긴장재": "D35이하", "최소피복 (mm)": "20"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "벽체", "철근/긴장재": "D35이하", "최소피복 (mm)": "20"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "장선", "철근/긴장재": "D35이하", "최소피복 (mm)": "20"}, {"No.": "7", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보", "철근/긴장재": "All_rebar", "최소피복 (mm)": "40"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "기둥", "철근/긴장재": "All_rebar", "최소피복 (mm)": "40"}, {"No.": "8", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "All_rebar", "최소피복 (mm)": "20"}, {"No.": "9", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "흙타설_거푸집없이", "부재종류": "All_element", "철근/긴장재": "All_rebar", "최소피복 (mm)": "75"}, {"No.": "10", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "슬래브", "철근/긴장재": "All_rebar", "최소피복 (mm)": "30"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "벽체", "철근/긴장재": "All_rebar", "최소피복 (mm)": "30"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "장선", "철근/긴장재": "All_rebar", "최소피복 (mm)": "30"}, {"No.": "11", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "기타 부재", "철근/긴장재": "All_rebar", "최소피복 (mm)": "40"}, {"No.": "12", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브", "철근/긴장재": "All_rebar", "최소피복 (mm)": "20"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "벽체", "철근/긴장재": "All_rebar", "최소피복 (mm)": "20"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "장선", "철근/긴장재": "All_rebar", "최소피복 (mm)": "20"}, {"No.": "13", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보", "철근/긴장재": "주철근", "최소피복 (mm)": "40"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "기둥", "철근/긴장재": "주철근", "최소피복 (mm)": "40"}, {"No.": "14", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보", "철근/긴장재": "띠철근, 스터럽, 나선철근", "최소피복 (mm)": "30"}, {"No.": "", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "기둥", "철근/긴장재": "띠철근, 스터럽, 나선철근", "최소피복 (mm)": "30"}, {"No.": "15", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "D19이상", "최소피복 (mm)": "db"}, {"No.": "16", "생산 방법": "현장치기(In-situ Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "D16이하", "최소피복 (mm)": "10"}, {"No.": "17", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "벽체", "철근/긴장재": "D35초과", "최소피복 (mm)": "40"}, {"No.": "18", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "벽체", "철근/긴장재": "D35이하", "최소피복 (mm)": "20"}, {"No.": "19", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "벽체", "철근/긴장재": "긴장재 40mm 초과", "최소피복 (mm)": "40"}, {"No.": "20", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "벽체", "철근/긴장재": "긴장재 40mm 이하", "최소피복 (mm)": "20"}, {"No.": "21", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "기타 부재", "철근/긴장재": "D35초과", "최소피복 (mm)": "50"}, {"No.": "22", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "기타 부재", "철근/긴장재": "D35이하", "최소피복 (mm)": "40"}, {"No.": "23", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "기타 부재", "철근/긴장재": "긴장재 40mm 초과", "최소피복 (mm)": "50"}, {"No.": "24", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "흙에 접하거나 옥외 공기에 노출", "부재종류": "기타 부재", "철근/긴장재": "긴장재 40mm 이하", "최소피복 (mm)": "40"}, {"No.": "25", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브, 벽체, 장선", "철근/긴장재": "D35초과", "최소피복 (mm)": "30"}, {"No.": "26", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브, 벽체, 장선", "철근/긴장재": "D35이하", "최소피복 (mm)": "20"}, {"No.": "27", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브, 벽체, 장선", "철근/긴장재": "긴장재 40mm 초과", "최소피복 (mm)": "30"}, {"No.": "28", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "슬래브, 벽체, 장선", "철근/긴장재": "긴장재 40mm 이하", "최소피복 (mm)": "20"}, {"No.": "29", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보, 기둥", "철근/긴장재": "주철근", "최소피복 (mm)": "db"}, {"No.": "30", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보, 기둥", "철근/긴장재": "띠철근, 스터럽, 나선철근", "최소피복 (mm)": "10"}, {"No.": "31", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보, 기둥", "철근/긴장재": "주철근", "최소피복 (mm)": "db"}, {"No.": "32", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "보, 기둥", "철근/긴장재": "띠철근, 스터럽, 나선철근", "최소피복 (mm)": "10"}, {"No.": "33", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "PSC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "긴장재", "최소피복 (mm)": "20"}, {"No.": "34", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "D19이상", "최소피복 (mm)": "15"}, {"No.": "35", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "D32이상", "최소피복 (mm)": "db/2"}, {"No.": "36", "생산 방법": "프리캐스트(Precast Concrete)", "구조형식": "RC", "현장 조건": "옥외의 공기나 흙에 직접 접하지 않음", "부재종류": "쉘, 절판", "철근/긴장재": "D16이하", "최소피복 (mm)": "10"}];
const COVER_META = {"No.": {"numeric": true, "unique": ["1", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "2", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "3", "30", "31", "32", "33", "34", "35", "36", "4", "5", "6", "7", "8", "9"]}, "생산 방법": {"numeric": false, "unique": ["프리캐스트(Precast Concrete)", "현장치기(In-situ Concrete)"]}, "구조형식": {"numeric": false, "unique": ["PSC", "RC"]}, "현장 조건": {"numeric": false, "unique": ["수중타설", "옥외의 공기나 흙에 직접 접하지 않음", "흙에 접하거나 옥외 공기에 노출", "흙타설_거푸집없이"]}, "부재종류": {"numeric": false, "unique": ["All_element", "기둥", "기타 부재", "벽체", "보", "보, 기둥", "쉘, 절판", "슬래브", "슬래브, 벽체, 장선", "장선"]}, "철근/긴장재": {"numeric": false, "unique": ["All_rebar", "D16이하", "D19이상", "D32이상", "D35이하", "D35초과", "긴장재", "긴장재 40mm 이하", "긴장재 40mm 초과", "띠철근, 스터럽, 나선철근", "주철근"]}, "최소피복 (mm)": {"numeric": true, "unique": ["10", "100", "15", "20", "30", "40", "50", "75", "db", "db/2"]}};
const COVER_COLUMNS = Object.keys(COVER_META);
const COVER_FILTER_KEYS = ["생산 방법", "구조형식", "현장 조건"];

const COVER_STATE = { q:'', filters: {}, sortKey:null, sortDir:1, visible:[] };

function coverBuildHeader() {
  const head = document.getElementById('coverHead');
  if (!head) return;
  let html = '<tr>' + COVER_COLUMNS.map(c => `<th data-col="${c}">${c}</th>`).join('') + '</tr>';
  head.innerHTML = html;
  head.querySelectorAll('th').forEach(th => th.addEventListener('click', () => { 
    const col = th.dataset.col;
    if (COVER_STATE.sortKey === col) COVER_STATE.sortDir *= -1; else { COVER_STATE.sortKey = col; COVER_STATE.sortDir = 1; }
    coverRender();
  }));
}

function coverBuildFilters() {
  const root = document.getElementById('coverFilters'); if (!root) return;
  root.innerHTML = '';
  COVER_STATE.filters = {};
  COVER_FILTER_KEYS.forEach(col => {
    const meta = COVER_META[col] || { unique:[] };
    const div = document.createElement('div');
    const label = document.createElement('label'); label.textContent = col; div.appendChild(label);
    if (meta.unique && meta.unique.length && meta.unique.length <= 25) {
      const sel = document.createElement('select'); sel.multiple = true; sel.size = Math.min(7, meta.unique.length+1);
      const opt = document.createElement('option'); opt.value='__ALL__'; opt.textContent='전체'; sel.appendChild(opt);
      meta.unique.forEach(v => { const o = document.createElement('option'); o.value=v; o.textContent = v || '(공백)'; sel.appendChild(o); });
      sel.addEventListener('change', () => {
        const values = Array.from(sel.selectedOptions).map(o => o.value);
        if (values.includes('__ALL__') || values.length === 0) delete COVER_STATE.filters[col];
        else COVER_STATE.filters[col] = { type:'in', values };
        coverRenderChips(); coverRender();
      });
      div.appendChild(sel);
    } else {
      const inp = document.createElement('input'); inp.placeholder='포함 검색';
      inp.addEventListener('input', ()=>{ const v=inp.value.trim(); if(!v) delete COVER_STATE.filters[col]; else COVER_STATE.filters[col]={type:'contains', q:v.toLowerCase()}; coverRenderChips(); coverRender(); });
      div.appendChild(inp);
    }
    root.appendChild(div);
  });
}

function coverRenderChips(){
  const chips = document.getElementById('coverChips'); if (!chips) return;
  chips.innerHTML = '';
  Object.entries(COVER_STATE.filters).forEach(([col,rule]) => {
    const span = document.createElement('span'); span.className='cover-chip';
    let text = col + ': ';
    if (rule.type==='in') text += rule.values.join(', ');
    if (rule.type==='contains') text += '“' + rule.q + '” 포함';
    span.textContent = text;
    chips.appendChild(span);
  });
}

function coverApplyFilters(rows){
  let out = [...rows];
  const q = COVER_STATE.q;
  if (q) out = out.filter(r => COVER_COLUMNS.some(c => String(r[c] ?? '').toLowerCase().includes(q)));
  for (const [col,rule] of Object.entries(COVER_STATE.filters)) {
    out = out.filter(r => {
      const val = String(r[col] ?? '');
      if (rule.type==='contains') return val.toLowerCase().includes(rule.q);
      if (rule.type==='in') return rule.values.includes(val);
      return true;
    });
  }
  return out;
}

function coverRender(){
  let rows = coverApplyFilters(COVER_ROWS);
  const cnt = document.getElementById('coverCount'); if (cnt) cnt.textContent = '행: ' + rows.length;
  // sort
  const k = COVER_STATE.sortKey;
  if (k) {
    rows.sort((a,b) => {
      const av = a[k] ?? ''; const bv = b[k] ?? '';
      const an = parseFloat(String(av).replace(/,/g,'')); const bn = parseFloat(String(bv).replace(/,/g,''));
      if (!Number.isNaN(an) && !Number.isNaN(bn)) return (an - bn) * COVER_STATE.sortDir;
      return String(av).localeCompare(String(bv), 'ko') * COVER_STATE.sortDir;
    });
  }
  const body = document.getElementById('coverBody'); if (!body) return;
  let html = '';
  rows.forEach(r => {
    html += '<tr>' + COVER_COLUMNS.map(c => `<td>${r[c] ?? ''}</td>`).join('') + '</tr>';
  });
  body.innerHTML = html;
  COVER_STATE.visible = rows;
}

document.getElementById('coverSearch')?.addEventListener('input', (e)=>{ COVER_STATE.q = (e.target.value || '').toLowerCase(); coverRender(); });
document.getElementById('coverReset')?.addEventListener('click', ()=>{ 
  COVER_STATE.q=''; const sb=document.getElementById('coverSearch'); if(sb) sb.value='';
  COVER_STATE.filters={}; coverBuildFilters(); coverRenderChips(); coverRender();
});
document.getElementById('coverExport')?.addEventListener('click', ()=>{
  const rows = COVER_STATE.visible || []; if (!rows.length) return;
  const cols = COVER_COLUMNS; const header = cols.join(',');
  const body = rows.map(r => cols.map(c => `"$\{String(r[c] ?? '').replace(/"/g,'""')}"`).join(',')).join('\n');
  const csv = header + '\n' + body;
  const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='cover_filtered.csv';
  document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

// Init cover
coverBuildHeader();
coverBuildFilters();
coverRender();

</script>
</body>
</html>
